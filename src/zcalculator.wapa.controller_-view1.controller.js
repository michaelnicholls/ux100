sap.ui.define([                                                                                                                                                                                                                                                
	"sap/ui/core/mvc/Controller"                                                                                                                                                                                                                                  
], function(Controller) {                                                                                                                                                                                                                                      
	"use strict";                                                                                                                                                                                                                                                 
	var fixed = "/sap/opu/odata/SAP/Z_DYNAMIC_TILE_SRV";                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
	return Controller.extend("p1.controller.View1", {                                                                                                                                                                                                             
                                                                                                                                                                                                                                                               
		onInit: function() {                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
			//			var fixed = "/sap/opu/odata/SAP/Z_DYNAMIC_TILE_SRV";                                                                                                                                                                                                   
			var params = "/calculatorSet(operand1=30,operator='%2B',operand2=20)?$format=json";                                                                                                                                                                         
			var oModel = new sap.ui.model.odata.v2.ODataModel(fixed);                                                                                                                                                                                                   
			var validops = "+";                                                                                                                                                                                                                                         
			var jsonModel = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                          
			var opModel = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                            
			oModel.read(params,{                                                                                                                                                                                                                                        
			success: function(oData,oResponse){                                                                                                                                                                                                                         
				jsonModel.setData(oData);                                                                                                                                                                                                                                  
				validops=oData.ops;                                                                                                                                                                                                                                        
		                                                                                                                                                                                                                                                             
			opModel.setData({ops: []});                                                                                                                                                                                                                                 
			var t=opModel.getData();                                                                                                                                                                                                                                    
			var opsArray = Array.from(validops);                                                                                                                                                                                                                        
			for (var i=0;i<opsArray.length;i++)                                                                                                                                                                                                                         
				{                                                                                                                                                                                                                                                          
					t.ops.push({op:opsArray[i]});                                                                                                                                                                                                                             
				}                                                                                                                                                                                                                                                          
				opModel.setData(t);                                                                                                                                                                                                                                        
			},                                                                                                                                                                                                                                                          
			error: function(oError){                                                                                                                                                                                                                                    
			                                                                                                                                                                                                                                                            
			}                                                                                                                                                                                                                                                           
		});                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
			this.getView().setModel(opModel, "ops");                                                                                                                                                                                                                    
  			this.getView().setModel(jsonModel);                                                                                                                                                                                                                       
		                                                                                                                                                                                                                                                             
		},                                                                                                                                                                                                                                                           
		onGo: function(oEvent) {                                                                                                                                                                                                                                     
			var op1 = this.getView().getModel().getProperty('/operand1');                                                                                                                                                                                               
			var op2 = this.getView().getModel().getProperty('/operand2');                                                                                                                                                                                               
			var op = this.getView().byId("op").getSelectedButton().getText();                                                                                                                                                                                           
			if (op1 === undefined) {                                                                                                                                                                                                                                    
				op1 = "";                                                                                                                                                                                                                                                  
			}                                                                                                                                                                                                                                                           
			if (op2 === undefined) {                                                                                                                                                                                                                                    
				op2 = "";                                                                                                                                                                                                                                                  
			}                                                                                                                                                                                                                                                           
			if (op1 === "" || op2 === "") {                                                                                                                                                                                                                             
				this.getView().getModel().setProperty("/error", "operand1 and operand2 required");                                                                                                                                                                         
				this.getView().getModel().setProperty("/result",0);                                                                                                                                                                                                        
			} else if (op1.toString().includes(".") || op2.toString().includes(".")) {                                                                                                                                                                                  
				this.getView().getModel().setProperty("/error", "integers only");                                                                                                                                                                                          
					this.getView().getModel().setProperty("/result",0);                                                                                                                                                                                                       
			} else {                                                                                                                                                                                                                                                    
				//			var fixed = "/sap/opu/odata/SAP/Z_DYNAMIC_TILE_SRV";                                                                                                                                                                                                  
				var params = "/calculatorSet(operand1=" + op1 + ",operator='" + encodeURIComponent(op) + "',operand2=" + op2 + ")?$format=json";                                                                                                                           
				var oModel = new sap.ui.model.odata.v2.ODataModel(fixed);                                                                                                                                                                                                  
				var jsonModel = new sap.ui.model.json.JSONModel();                                                                                                                                                                                                         
				oModel.read(params,{                                                                                                                                                                                                                                       
					success: function(oData,oResponse){                                                                                                                                                                                                                       
						jsonModel.setData(oData);                                                                                                                                                                                                                                
					},                                                                                                                                                                                                                                                        
					error: function(oError){                                                                                                                                                                                                                                  
					}                                                                                                                                                                                                                                                         
				}                                                                                                                                                                                                                                                          
				);                                                                                                                                                                                                                                                         
				this.getView().setModel(jsonModel);                                                                                                                                                                                                                        
			}                                                                                                                                                                                                                                                           
		}                                                                                                                                                                                                                                                            
	});                                                                                                                                                                                                                                                           
});                                                                                                                                                                                                                                                            